{"ast":null,"code":"var _jsxFileName = \"/Users/vilhelmirintanen/IntroDS_Project/frontend/src/App.tsx\",\n  _s = $RefreshSig$();\n// src/App.tsx\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { AnimeCard } from \"./Components/AnimeCard\";\nimport Choices from \"./Components/Choices\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || \"\";\nfunction App() {\n  _s();\n  const [recommendations, setRecommendations] = useState([]);\n  const [originalRecommendations, setOriginalRecommendations] = useState([]);\n  const colors = [\"bg-red-200\", \"bg-blue-200\", \"bg-gray-200\", \"bg-amber-200\", \"bg-lime-500\", \"bg-teal-300\", \"bg-violet-300\", \"bg-fuchsia-200\", \"bg-indigo-100\", \"bg-sky-200\", \"bg-emerald-100\"];\n  const getRecommendations = async (genres, description, sort = \"SCORE_DESC\") => {\n    try {\n      const payload = {\n        genres,\n        description,\n        sort\n      };\n      const url = API_BASE !== \"\" ? `${API_BASE}/recommendations` : \"/recommendations\";\n      const res = await axios.post(url, payload);\n      const data = Array.isArray(res.data) ? res.data : [];\n      const withColors = data.map(item => ({\n        ...item,\n        col: colors[Math.floor(Math.random() * colors.length)]\n      }));\n      setOriginalRecommendations(withColors);\n      setRecommendations(withColors);\n    } catch (error) {\n      console.error(\"Failed to fetch recommendations:\", error);\n      setRecommendations([]);\n      setOriginalRecommendations([]);\n    }\n  };\n  const sortByScore = () => {\n    const sorted = [...recommendations].sort((a, b) => {\n      var _b$averageScore, _a$averageScore;\n      return ((_b$averageScore = b.averageScore) !== null && _b$averageScore !== void 0 ? _b$averageScore : 0) - ((_a$averageScore = a.averageScore) !== null && _a$averageScore !== void 0 ? _a$averageScore : 0);\n    });\n    setRecommendations(sorted);\n  };\n  const sortByPopularity = () => {\n    const sorted = [...recommendations].sort(\n    // backend now sends popularity\n    (a, b) => {\n      var _b$popularity, _a$popularity;\n      return ((_b$popularity = b.popularity) !== null && _b$popularity !== void 0 ? _b$popularity : 0) - ((_a$popularity = a.popularity) !== null && _a$popularity !== void 0 ? _a$popularity : 0);\n    });\n    setRecommendations(sorted);\n  };\n  const sortBySimilarity = () => {\n    const sorted = [...recommendations].sort((a, b) => {\n      var _b$similarity, _a$similarity;\n      return ((_b$similarity = b.similarity) !== null && _b$similarity !== void 0 ? _b$similarity : 0) - ((_a$similarity = a.similarity) !== null && _a$similarity !== void 0 ? _a$similarity : 0);\n    });\n    setRecommendations(sorted);\n  };\n  const resetOrder = () => {\n    setRecommendations(originalRecommendations);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-3 min-h-screen flex flex-col gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App flex flex-col gap-2 px-4 pt-4\",\n      children: /*#__PURE__*/_jsxDEV(Choices, {\n        getRecommendations: getRecommendations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-4 flex flex-col gap-2 sm:flex-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sortByScore,\n        className: \"w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 rounded bg-blue-200 hover:opacity-80 text-center\",\n          children: \"Sort by score\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sortByPopularity,\n        className: \"w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 rounded bg-teal-200 hover:opacity-80 text-center\",\n          children: \"Sort by popularity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sortBySimilarity,\n        className: \"w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 rounded bg-violet-200 hover:opacity-80 text-center\",\n          children: \"Sort by similarity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetOrder,\n        className: \"w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-2 rounded bg-yellow-200 hover:opacity-80 text-center\",\n          children: \"Original order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 mx-4 pb-6\",\n      children: recommendations.map((anime, index) => {\n        var _anime$id;\n        return /*#__PURE__*/_jsxDEV(AnimeCard, {\n          ...anime\n        }, (_anime$id = anime.id) !== null && _anime$id !== void 0 ? _anime$id : `${anime.title.romaji}-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"VU7IQgG4S68wLycHwMv3ASHUpwI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","axios","AnimeCard","Choices","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","App","_s","recommendations","setRecommendations","originalRecommendations","setOriginalRecommendations","colors","getRecommendations","genres","description","sort","payload","url","res","post","data","Array","isArray","withColors","map","item","col","Math","floor","random","length","error","console","sortByScore","sorted","a","b","_b$averageScore","_a$averageScore","averageScore","sortByPopularity","_b$popularity","_a$popularity","popularity","sortBySimilarity","_b$similarity","_a$similarity","similarity","resetOrder","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","anime","index","_anime$id","id","title","romaji","_c","$RefreshReg$"],"sources":["/Users/vilhelmirintanen/IntroDS_Project/frontend/src/App.tsx"],"sourcesContent":["// src/App.tsx\nimport React, { useState } from \"react\"\nimport axios from \"axios\"\nimport { AnimeCard } from \"./Components/AnimeCard\"\nimport Choices from \"./Components/Choices\"\nimport { AnimeCardData } from \"./types\"\n\nconst API_BASE = process.env.REACT_APP_API_BASE || \"\"\n\nfunction App() {\n  const [recommendations, setRecommendations] = useState<AnimeCardData[]>([])\n  const [originalRecommendations, setOriginalRecommendations] = useState<AnimeCardData[]>([])\n\n  const colors = [\n    \"bg-red-200\",\n    \"bg-blue-200\",\n    \"bg-gray-200\",\n    \"bg-amber-200\",\n    \"bg-lime-500\",\n    \"bg-teal-300\",\n    \"bg-violet-300\",\n    \"bg-fuchsia-200\",\n    \"bg-indigo-100\",\n    \"bg-sky-200\",\n    \"bg-emerald-100\",\n  ]\n\n  const getRecommendations = async (\n    genres: string,\n    description: string | undefined,\n    sort: string = \"SCORE_DESC\"\n  ): Promise<void> => {\n    try {\n      const payload = { genres, description, sort }\n      const url =\n        API_BASE !== \"\"\n          ? `${API_BASE}/recommendations`\n          : \"/recommendations\"\n\n      const res = await axios.post(url, payload)\n      const data = Array.isArray(res.data) ? res.data : []\n\n      const withColors: AnimeCardData[] = data.map((item) => ({\n        ...item,\n        col: colors[Math.floor(Math.random() * colors.length)],\n      }))\n\n      setOriginalRecommendations(withColors)\n      setRecommendations(withColors)\n    } catch (error) {\n      console.error(\"Failed to fetch recommendations:\", error)\n      setRecommendations([])\n      setOriginalRecommendations([])\n    }\n  }\n\n  const sortByScore = () => {\n    const sorted = [...recommendations].sort(\n      (a, b) => (b.averageScore ?? 0) - (a.averageScore ?? 0)\n    )\n    setRecommendations(sorted)\n  }\n\n  const sortByPopularity = () => {\n    const sorted = [...recommendations].sort(\n      // backend now sends popularity\n      (a: any, b: any) => (b.popularity ?? 0) - (a.popularity ?? 0)\n    )\n    setRecommendations(sorted)\n  }\n\n  const sortBySimilarity = () => {\n    const sorted = [...recommendations].sort(\n      (a: any, b: any) => (b.similarity ?? 0) - (a.similarity ?? 0)\n    )\n    setRecommendations(sorted)\n  }\n\n  const resetOrder = () => {\n    setRecommendations(originalRecommendations)\n  }\n\n  return (\n    <div className=\"mb-3 min-h-screen flex flex-col gap-4\">\n      <div className=\"App flex flex-col gap-2 px-4 pt-4\">\n        <Choices getRecommendations={getRecommendations} />\n      </div>\n\n      {/* sorting controls (same width style) */}\n      <div className=\"mx-4 flex flex-col gap-2 sm:flex-row\">\n        <button onClick={sortByScore} className=\"w-full\">\n          <div className=\"p-2 rounded bg-blue-200 hover:opacity-80 text-center\">\n            Sort by score\n          </div>\n        </button>\n        <button onClick={sortByPopularity} className=\"w-full\">\n          <div className=\"p-2 rounded bg-teal-200 hover:opacity-80 text-center\">\n            Sort by popularity\n          </div>\n        </button>\n        <button onClick={sortBySimilarity} className=\"w-full\">\n          <div className=\"p-2 rounded bg-violet-200 hover:opacity-80 text-center\">\n            Sort by similarity\n          </div>\n        </button>\n        <button onClick={resetOrder} className=\"w-full\">\n          <div className=\"p-2 rounded bg-yellow-200 hover:opacity-80 text-center\">\n            Original order\n          </div>\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 mx-4 pb-6\">\n        {recommendations.map((anime, index) => (\n          <AnimeCard\n            key={anime.id ?? `${anime.title.romaji}-${index}`}\n            {...anime}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}